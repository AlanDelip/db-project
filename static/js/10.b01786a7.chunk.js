(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{288:function(e,t,a){"use strict";a.r(t);var n=a(6),l=a(7),r=a(9),c=a(8),o=a(10),i=a(11),s=a(1),u=a.n(s),m=a(3),d=(a(212),a(213),a(46)),g=a.n(d),p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(c.a)(t).call(this,e))).state={userID:sessionStorage.getItem("user_id"),restaurantID:sessionStorage.getItem("restaurantID"),restaurantInfo:{rid:1,cid:1,cname:"pizza",name:"Metro Pizza",contact:"(702) 486-4368",location:"5757 Wayne Newton Blvd",star:2.5,photo_url:"https://s3-media1.fl.yelpcdn.com/bphoto/aAoUthFqsND23zdy1sZftw/o.jpg",longitude:-115.1391027,latitude:36.0808997},categories:[],recipes:[],modal:!1,success:!1,warning:!1,info_res:!1,info:!1,allIngredients:[],collapse:!1,accordion:[!0,!1,!1],custom:[!0,!1],status:"Closed",fadeIn:!0,timeout:300},a.toggleInfo=a.toggleInfo.bind(Object(i.a)(Object(i.a)(a))),a.toggleInfo_res=a.toggleInfo_res.bind(Object(i.a)(Object(i.a)(a))),a.toggleAccordion=a.toggleAccordion.bind(Object(i.a)(Object(i.a)(a))),a.toggle=a.toggle.bind(Object(i.a)(Object(i.a)(a))),a.toggleSuccess=a.toggleSuccess.bind(Object(i.a)(Object(i.a)(a))),a.toggleWarning=a.toggleWarning.bind(Object(i.a)(Object(i.a)(a))),a.addNewRecipe=a.addNewRecipe.bind(Object(i.a)(Object(i.a)(a))),a.deleteRecipe=a.deleteRecipe.bind(Object(i.a)(Object(i.a)(a))),a.updateRecipe=a.updateRecipe.bind(Object(i.a)(Object(i.a)(a))),a.setUpAccording=a.setUpAccording.bind(Object(i.a)(Object(i.a)(a))),a.updateRestaurant=a.updateRestaurant.bind(Object(i.a)(Object(i.a)(a))),a.updateRestaurantDetails=a.updateRestaurantDetails.bind(Object(i.a)(Object(i.a)(a))),a.updateInfoRender=a.updateInfoRender.bind(Object(i.a)(Object(i.a)(a))),a.updateRecipe(),a.updateRestaurantDetails(),g.a.get("http://34.83.23.47:8080/api/ingredient").then(function(e){a.setState({allIngredients:e.data})},function(e){console.log(e)}),g.a.get("http://34.83.23.47:8080/api/category").then(function(e){a.setState({categories:e.data})},function(e){console.log(e)}),a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"updateRestaurantDetails",value:function(){var e=this;g.a.get("http://34.83.23.47:8080/api/restaurant/"+this.state.restaurantID).then(function(t){e.setState({restaurantInfo:t.data})},function(e){console.log(e)})}},{key:"updateRestaurant",value:function(){var e=this,t=document.getElementById("name").value,a=document.getElementById("contact").value,n=document.getElementById("location").value,l=document.getElementById("photo_url").value,r=document.getElementById("longitude").value,c=document.getElementById("latitude").value,o=document.querySelector("#categories option:checked").value;g.a.put("http://34.83.23.47:8080/api/restaurant/"+this.state.restaurantID,{cid:o,name:""==t?this.state.restaurantInfo.name:t,contact:""==a?this.state.restaurantInfo.contact:a,location:""==n?this.state.restaurantInfo.location:n,photo_url:""==l?this.state.restaurantInfo.photo_url:l,longitude:""==r?this.state.restaurantInfo.longitude:r,latitude:""==c?this.state.restaurantInfo.latitude:c}).then(function(t){e.toggleInfo_res(),e.toggleSuccess(),e.updateRestaurantDetails()},function(e){console.log(e)})}},{key:"updateRecipe",value:function(){var e=this;g.a.get("http://34.83.23.47:8080/api/restaurant/"+this.state.restaurantID+"/recipe").then(function(t){e.setState({recipes:t.data}),e.setUpAccording(e.state.recipes.length)},function(e){console.log(e)})}},{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"toggleSuccess",value:function(){this.setState({success:!this.state.success})}},{key:"toggleWarning",value:function(){this.setState({warning:!this.state.warning})}},{key:"toggleInfo",value:function(){this.setState({info:!this.state.info})}},{key:"toggleInfo_res",value:function(){this.setState({info_res:!this.state.info_res}),this.updateInfoRender()}},{key:"toggleAccordion",value:function(e){var t=this.state.accordion.map(function(t,a){return e===a&&!t});this.setState({accordion:t})}},{key:"setUpAccording",value:function(e){var t=[];t.push(!0);for(var a=1;a<e;a++)t.push(!1);this.setState({accordion:t})}},{key:"addNewRecipe",value:function(){var e=this,t=document.getElementById("name").value,a=document.getElementById("price").value,n=document.getElementById("photo_url").value,l=Array.prototype.map.apply(document.querySelectorAll("#ingredients option:checked"),[function(e){return{iid:e.value}}]);console.log(l),g.a.post("http://34.83.23.47:8080/api/restaurant/"+this.state.restaurantID+"/recipe",{name:t,price:a,photo_url:n,ingredients:l}).then(function(t){e.toggleInfo(),e.toggleSuccess(),e.updateRecipe()},function(t){e.toggleWarning()})}},{key:"deleteRecipe",value:function(e,t){var a=this;t.stopPropagation(),g.a.delete("http://34.83.23.47:8080/api/restaurant/"+this.state.restaurantID+"/recipe",{data:{rid:e}}).then(function(e){a.toggleSuccess(),a.updateRecipe()},function(e){a.toggleWarning()})}},{key:"updateInfoRender",value:function(){var e=this;return u.a.createElement(m.C,{isOpen:this.state.info_res,toggle:this.toggleInfo_res,className:"modal-danger "+this.props.className},u.a.createElement(m.F,{toggle:this.toggleInfo_res},"Update Restaurant Information"),u.a.createElement(m.D,null,u.a.createElement(m.t,null,u.a.createElement(m.z,{htmlFor:"name"},"Restaurant Name"),u.a.createElement(m.u,{type:"text",id:"name",placeholder:this.state.restaurantInfo.name,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"contact"},"Recipe Contact"),u.a.createElement(m.u,{type:"text",id:"contact",placeholder:this.state.restaurantInfo.contact,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"location"},"Recipe Location"),u.a.createElement(m.u,{type:"text",id:"location",placeholder:this.state.restaurantInfo.location,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"photo_url"},"Restaurant Phote (please use url)"),u.a.createElement(m.u,{type:"text",id:"photo_url",placeholder:this.state.restaurantInfo.photo_url,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"longitude"},"Restaurant longitude"),u.a.createElement(m.u,{type:"number",id:"longitude",placeholder:this.state.restaurantInfo.longitude,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"latitude"},"Restaurant latitude"),u.a.createElement(m.u,{type:"number",id:"latitude",placeholder:this.state.restaurantInfo.latitude,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"categories"},"Restaurant Category (Single Select)"),u.a.createElement(m.u,{type:"select",id:"categories",className:"400px",defaultValue:this.state.restaurantInfo.cid},this.state.categories.map(function(t,a){return t.cid===e.state.restaurantInfo.cid?u.a.createElement("option",{key:a,value:t.cid,selected:"selected"},t.name):u.a.createElement("option",{key:a,value:t.cid},t.name)})))),u.a.createElement(m.E,null,u.a.createElement(m.d,{color:"danger",onClick:this.updateRestaurant},"Confirm")," ",u.a.createElement(m.d,{color:"secondary",onClick:this.toggleInfo_res},"Cancel")))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"animated fadeIn normal-wrapper"},u.a.createElement("h1",null,this.state.restaurantInfo.name),u.a.createElement(m.J,null,u.a.createElement(m.l,{xs:"9",sm:"12",lg:"9"},u.a.createElement(m.e,null,u.a.createElement(m.i,null,u.a.createElement("i",{className:"fa fa-align-justify"}),u.a.createElement("strong",null,"Restaurants Information")),u.a.createElement(m.f,null,u.a.createElement(m.J,null,u.a.createElement(m.l,{xs:"6",sm:"6",lg:"6"},u.a.createElement("img",{className:"img-fluid img-thumbnail rounded w-100",src:this.state.restaurantInfo.photo_url})),u.a.createElement(m.l,{xs:"6",sm:"6",lg:"6"},u.a.createElement("h5",null,u.a.createElement("strong",null,"Category: "),this.state.restaurantInfo.cname),u.a.createElement("br",null),u.a.createElement("h5",null,u.a.createElement("strong",null,"Contact: "),this.state.restaurantInfo.contact),u.a.createElement("br",null),u.a.createElement("h5",null,u.a.createElement("strong",null,"Location: "),this.state.restaurantInfo.location),u.a.createElement("br",null),u.a.createElement("h5",null,u.a.createElement("strong",null,"Latitude: "),this.state.restaurantInfo.latitude),u.a.createElement("br",null),u.a.createElement("h5",null,u.a.createElement("strong",null,"Longitude: "),this.state.restaurantInfo.longitude),u.a.createElement("br",null),u.a.createElement("h5",null,u.a.createElement("strong",null,"Star: "),this.state.restaurantInfo.star),u.a.createElement("br",null),u.a.createElement(m.d,{className:"d-inline-block btn-outline-dark float-right",onClick:this.toggleInfo_res},"Update Info"))))),u.a.createElement(m.e,null,u.a.createElement(m.i,null,u.a.createElement("i",{className:"fa fa-align-justify"}),u.a.createElement("strong",null,"Recipes & Ingredients")),u.a.createElement(m.f,null,u.a.createElement("div",{id:"accordion"},u.a.createElement(m.d,{className:"bg-primary text-white",style:{marginBottom:"1em"},onClick:function(){return e.toggleInfo()}},u.a.createElement("i",{className:"fa fa-plus fa-adjust-aligh"}),u.a.createElement("h5",{className:"d-inline-block ml-2"},"Add New Recipe")),this.state.recipes.map(function(t,a){return u.a.createElement(m.e,{key:a},u.a.createElement(m.i,{id:"heading"+a},u.a.createElement(m.d,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:function(){return e.toggleAccordion(a)},"aria-expanded":e.state.accordion[0],"aria-controls":"collapseOne"},u.a.createElement("h5",{className:"d-inline-block m-0 p-0"},t.name),u.a.createElement(m.d,{className:"d-inline-block btn-outline-dark float-right",onClick:e.deleteRecipe.bind(e,t.rid)},"Delete"))),u.a.createElement(m.m,{isOpen:e.state.accordion[a],"data-parent":"#accordion",id:"collapse"+a,"aria-labelledby":"heading"+a},u.a.createElement(m.f,null,u.a.createElement(m.J,null,u.a.createElement(m.l,{xs:"6",sm:"6",lg:"6"},u.a.createElement("img",{className:"img-fluid img-thumbnail rounded d-block w-100",src:t.photo_url})),u.a.createElement(m.l,{xs:"6",sm:"6",lg:"6"},u.a.createElement("h5",null,u.a.createElement("strong",null,"Price:")),u.a.createElement("h5",null,"$",t.price),u.a.createElement("h5",null,u.a.createElement("strong",null,"Ingredients:")),t.ingredients.map(function(e,t){return u.a.createElement("h5",{key:t},e.name+" ")}))))))}))))),u.a.createElement(m.C,{isOpen:this.state.success,toggle:this.toggleSuccess,className:"modal-success "+this.props.className},u.a.createElement(m.F,{toggle:this.toggleSuccess},"Operation Success"),u.a.createElement(m.D,null,"Your change has been successfully updated."),u.a.createElement(m.E,null,u.a.createElement(m.d,{color:"success",onClick:this.toggleSuccess},"OK")," ")),u.a.createElement(m.C,{isOpen:this.state.warning,toggle:this.toggleWarning,className:"modal-warning "+this.props.className},u.a.createElement(m.F,{toggle:this.toggleWarning},"Operation Fail"),u.a.createElement(m.D,null,"Please try again later."),u.a.createElement(m.E,null,u.a.createElement(m.d,{color:"warning",onClick:this.toggleWarning},"OK")," ",u.a.createElement(m.d,{color:"secondary",onClick:this.toggleWarning},"Cancel"))),u.a.createElement(m.C,{isOpen:this.state.info,toggle:this.toggleInfo,className:"modal-danger "+this.props.className},u.a.createElement(m.F,{toggle:this.toggleInfo},"New Recipe"),u.a.createElement(m.D,null,u.a.createElement(m.t,null,u.a.createElement(m.z,{htmlFor:"name"},"Recipe Name"),u.a.createElement(m.u,{type:"text",id:"name",placeholder:"Enter recipe name",required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"price"},"Recipe Price"),u.a.createElement(m.u,{type:"text",id:"price",placeholder:"Enter recipe price",required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"photo_url"},"Recipe Phote (please use url)"),u.a.createElement(m.u,{type:"text",id:"photo_url",placeholder:"Enter photo_url",required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"ingredients"},"Recipe Ingredients (Multiple Select)"),u.a.createElement(m.u,{type:"select",id:"ingredients",className:"400px",multiple:!0},this.state.allIngredients.map(function(e,t){return u.a.createElement("option",{key:t,value:e.iid},e.name)})))),u.a.createElement(m.E,null,u.a.createElement(m.d,{color:"danger",onClick:this.addNewRecipe},"Confirm")," ",u.a.createElement(m.d,{color:"secondary",onClick:this.toggleInfo},"Cancel"))),u.a.createElement(m.C,{isOpen:this.state.info_res,toggle:this.toggleInfo_res,className:"modal-danger "+this.props.className},u.a.createElement(m.F,{toggle:this.toggleInfo_res},"Update Restaurant Information"),u.a.createElement(m.D,null,u.a.createElement(m.t,null,u.a.createElement(m.z,{htmlFor:"name"},"Restaurant Name"),u.a.createElement(m.u,{type:"text",id:"name",defaultValue:this.state.restaurantInfo.name,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"contact"},"Recipe Contact"),u.a.createElement(m.u,{type:"text",id:"contact",defaultValue:this.state.restaurantInfo.contact,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"location"},"Recipe Location"),u.a.createElement(m.u,{type:"text",id:"location",defaultValue:this.state.restaurantInfo.location,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"photo_url"},"Restaurant Phote (please use url)"),u.a.createElement(m.u,{type:"text",id:"photo_url",defaultValue:this.state.restaurantInfo.photo_url,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"longitude"},"Restaurant longitude"),u.a.createElement(m.u,{type:"number",id:"longitude",defaultValue:this.state.restaurantInfo.longitude,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"latitude"},"Restaurant latitude"),u.a.createElement(m.u,{type:"number",id:"latitude",defaultValue:this.state.restaurantInfo.latitude,required:!0}),u.a.createElement("br",null),u.a.createElement(m.z,{htmlFor:"categories"},"Restaurant Category (Single Select)"),u.a.createElement(m.u,{type:"select",id:"categories",className:"400px",defaultValue:this.state.restaurantInfo.cid},this.state.categories.map(function(e,t){return u.a.createElement("option",{key:t,value:e.cid},e.name)})))),u.a.createElement(m.E,null,u.a.createElement(m.d,{color:"danger",onClick:this.updateRestaurant},"Confirm")," ",u.a.createElement(m.d,{color:"secondary",onClick:this.toggleInfo_res},"Cancel")))))}}]),t}(s.Component);t.default=p}}]);
//# sourceMappingURL=10.b01786a7.chunk.js.map