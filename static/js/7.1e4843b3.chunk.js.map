{"version":3,"sources":["views/UserReviews/UserReviews.js"],"names":["UserReviews","props","_this","Object","E_Columbia_University_Courses_Database_project1_part3_database_project_yelp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","E_Columbia_University_Courses_Database_project1_part3_database_project_yelp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","E_Columbia_University_Courses_Database_project1_part3_database_project_yelp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","userID","sessionStorage","getItem","reviews","rid","reid","rname","uid","content","star","create_time","modal","success","warning","deleteReview","bind","E_Columbia_University_Courses_Database_project1_part3_database_project_yelp_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_5__","toggle","toggleSuccess","toggleWarning","updateReviews","setState","_this2","axios","get","then","response","data","error","console","log","_this3","undefined","window","alert","delete","_this4","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","reactstrap__WEBPACK_IMPORTED_MODULE_7__","map","object","id","lg","key","onClick","isOpen","color","Component"],"mappings":"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","file":"static/js/7.1e4843b3.chunk.js","sourcesContent":["/**\r\n * Created by GraceHan on 11/17/18.\r\n */\r\n/**\r\n * Created by GraceHan on 11/15/18.\r\n */\r\nimport React, {Component, lazy, Suspense} from 'react';\r\nimport {\r\n\tBadge,\r\n\tCard,\r\n\tCardBody,\r\n\tCardFooter,\r\n\tCardHeader,\r\n\tCardTitle,\r\n\tList,\r\n\tListGroup,\r\n\tListGroupItem,\r\n\tListGroupItemHeading,\r\n\tListGroupItemText,\r\n\tCollapse,\r\n\tForm,\r\n\tFormGroup,\r\n\tLabel,\r\n\tModal,\r\n\tModalHeader,\r\n\tModalBody,\r\n\tModalFooter,\r\n\tInput,\r\n\tFade,\r\n\tCol,\r\n\tRow,\r\n\tButton\r\n} from 'reactstrap';\r\nimport axios from 'axios';\r\nimport {CustomTooltips} from '@coreui/coreui-plugin-chartjs-custom-tooltips';\r\nimport {getStyle, hexToRgba} from '@coreui/coreui/dist/js/coreui-utilities';\r\n\r\nconst Loading = () => <div>Loading...</div>;\r\n\r\nclass UserReviews extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tuserID: sessionStorage.getItem(\"user_id\"),\r\n\t\t\treviews: [\r\n\t\t\t\t{\r\n\t\t\t\t\trid: 1,\r\n\t\t\t\t\treid: 3,\r\n\t\t\t\t\trname: \"Metro Pizza\",\r\n\t\t\t\t\tuid: 6,\r\n\t\t\t\t\tcontent: \"pizza is poor and the only food I'm satisfied with is the bottled water\",\r\n\t\t\t\t\tstar: 2.5,\r\n\t\t\t\t\tcreate_time: \"2018\\/10\\/9 19:04:11\"\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trid: 2,\r\n\t\t\t\t\treid: 1,\r\n\t\t\t\t\trname: \"Metro Pizza\",\r\n\t\t\t\t\tuid: 6,\r\n\t\t\t\t\tcontent: \"Fair pizza, poor service\",\r\n\t\t\t\t\tstar: 3,\r\n\t\t\t\t\tcreate_time: \"2018\\/11\\/2 12:04:11\"\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\tmodal: false,\r\n\t\t\tsuccess: false,\r\n\t\t\twarning: false\r\n\t\t};\r\n\r\n\t\tthis.deleteReview = this.deleteReview.bind(this);\r\n\t\tthis.toggle = this.toggle.bind(this);\r\n\t\tthis.toggleSuccess = this.toggleSuccess.bind(this);\r\n\t\tthis.toggleWarning = this.toggleWarning.bind(this);\r\n\t\tthis.updateReviews = this.updateReviews.bind(this);\r\n\r\n\t\tthis.updateReviews();\r\n\t}\r\n\r\n\t//add comment alert\r\n\ttoggle() {\r\n\t\tthis.setState({\r\n\t\t\tmodal: !this.state.modal,\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleSuccess() {\r\n\t\tthis.setState({\r\n\t\t\tsuccess: !this.state.success,\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleWarning() {\r\n\t\tthis.setState({\r\n\t\t\twarning: !this.state.warning,\r\n\t\t});\r\n\t}\r\n\r\n\tupdateReviews() {\r\n\t\taxios.get('http://localhost:8080/api/review/' + this.state.userID)\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\treviews: response.data\r\n\t\t\t\t});\r\n\t\t\t}, error => {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t});\r\n\t}\r\n\r\n\tdeleteReview(reid) {\r\n\t\t//http request delete user's review\r\n\t\tif (this.state.userID == undefined) {\r\n\t\t\twindow.alert(\"You have not login yet, please login first!\");\r\n\t\t} else {\r\n\t\t\taxios.delete('http://localhost:8080/api/review/' + this.state.userID, {\r\n\t\t\t\tdata: {\r\n\t\t\t\t\treid: reid\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\t\tthis.toggleSuccess();\r\n\t\t\t\t\t\tthis.updateReviews();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror => {\r\n\t\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t\t});\r\n\t\t}\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"animated fadeIn normal-wrapper\">\r\n\t\t\t\t<h1>Reviews</h1>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t{this.state.reviews.map((object, id) => {\r\n\t\t\t\t\t\treturn <Col lg=\"6\" key={id}><Card>\r\n\t\t\t\t\t\t\t<CardBody>\r\n\t\t\t\t\t\t\t\t<h5>{object.rname}</h5>\r\n\t\t\t\t\t\t\t\t<h4><b>\"{object.content}\"</b></h4>\r\n\t\t\t\t\t\t\t\t<h6><strong>Star: </strong>{object.star}</h6>\r\n\t\t\t\t\t\t\t\t<h6><strong>Create_time: </strong>{object.create_time}</h6>\r\n\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\tclassName=\"d-inline-flex btn-small btn-pill float-right btn-outline-danger\"\r\n\t\t\t\t\t\t\t\t\tonClick={this.deleteReview.bind(this, object.reid)}>Delete</Button>\r\n\t\t\t\t\t\t\t</CardBody>\r\n\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t})}\r\n\r\n\t\t\t\t\t<Modal isOpen={this.state.success} toggle={this.toggleSuccess}\r\n\t\t\t\t\t\t   className={'modal-success ' + this.props.className}>\r\n\t\t\t\t\t\t<ModalHeader toggle={this.toggleSuccess}>Delete Success</ModalHeader>\r\n\t\t\t\t\t\t<ModalBody>\r\n\t\t\t\t\t\t\tYour review has been removed.\r\n\t\t\t\t\t\t</ModalBody>\r\n\t\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t\t<Button color=\"success\" onClick={this.toggleSuccess}>OK</Button>{' '}\r\n\t\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t\t</Modal>\r\n\r\n\t\t\t\t\t<Modal isOpen={this.state.warning} toggle={this.toggleWarning}\r\n\t\t\t\t\t\t   className={'modal-warning ' + this.props.className}>\r\n\t\t\t\t\t\t<ModalHeader toggle={this.toggleWarning}>Review Fail</ModalHeader>\r\n\t\t\t\t\t\t<ModalBody>\r\n\t\t\t\t\t\t\tPlease provide un-empty reviews.\r\n\t\t\t\t\t\t</ModalBody>\r\n\t\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t\t<Button color=\"warning\" onClick={this.toggleWarning}>OK</Button>{' '}\r\n\t\t\t\t\t\t\t<Button color=\"secondary\" onClick={this.toggleWarning}>Cancel</Button>\r\n\t\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t\t</Modal>\r\n\t\t\t\t</Row>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default UserReviews;\r\n"],"sourceRoot":""}