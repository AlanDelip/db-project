(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{282:function(e,t,a){"use strict";a.r(t);var n=a(6),s=a(7),i=a(9),l=a(8),r=a(10),c=a(11),o=a(1),g=a.n(o),u=a(3),m=(a(212),a(213),a(46)),d=a.n(m),h=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(l.a)(t).call(this,e))).state={userID:sessionStorage.getItem("user_id"),restaurantID:sessionStorage.getItem("restaurantID"),restaurantInfo:{rid:1,cid:1,cname:"pizza",name:"Metro Pizza",contact:"(702) 486-4368",location:"5757 Wayne Newton Blvd",star:2.5,photo_url:"https://s3-media1.fl.yelpcdn.com/bphoto/aAoUthFqsND23zdy1sZftw/o.jpg",longitude:-115.1391027,latitude:36.0808997},recipes:[{rid:1,reid:1,name:"Cheese Pizza",price:13.95,photo_url:"https://s3-media3.fl.yelpcdn.com/bphoto/mx2_vrS6G1w-W8ZpJwTboA/o.jpg",ingredients:[{iid:6,name:"cheese"},{iid:11,name:"flour"}]},{rid:2,reid:1,name:"Sausage Pizza",price:15.95,photo_url:"https://s3-media3.fl.yelpcdn.com/bphoto/DwL54BKBvoTcmhrwaF4ntA/o.jpg",ingredients:[{iid:2,name:"pork"},{iid:11,name:"flour"}]},{rid:3,reid:1,name:"Salad",price:7.95,photo_url:"https://s3-media1.fl.yelpcdn.com/bphoto/JZ_lYnLIIoVm9OlpMG1aBg/o.jpg",ingredients:[{iid:5,name:"vegetable"},{iid:8,name:"fruit"}]}],reviews:[{rid:3,reid:1,uid:6,content:"pizza is poor and the only food I'm satisfied with is the bottled water",star:2.5,create_time:"2018/10/9 19:04:11"},{rid:2,reid:1,uid:6,content:"Fair pizza, poor service",star:3,create_time:"2018/11/2 12:04:11"},{rid:1,reid:1,uid:5,content:"They're Grandma slices are really good, My favorite is the margarita, the sause is sweet and delicious!",star:4.5,create_time:"2018/09/2 12:04:11"}],newReview:"",modal:!1,success:!1,warning:!1,info:!1,warningWishlist:!1,successAddWishList:!1,allStars:[1,2,3,4,5],wishlist:[{wid:"1",name:"Default List"},{wid:"2",name:"My Favorite Pizza Restaurants"},{wid:"3",name:"Nearby Chinese Restaurants"}],collapse:!1,accordion:[!0,!1,!1],custom:[!0,!1],status:"Closed",fadeIn:!0,timeout:300},a.toggleInfo=a.toggleInfo.bind(Object(c.a)(Object(c.a)(a))),a.toggleAccordion=a.toggleAccordion.bind(Object(c.a)(Object(c.a)(a))),a.addReview=a.addReview.bind(Object(c.a)(Object(c.a)(a))),a.toggle=a.toggle.bind(Object(c.a)(Object(c.a)(a))),a.toggleSuccess=a.toggleSuccess.bind(Object(c.a)(Object(c.a)(a))),a.toggleWarning=a.toggleWarning.bind(Object(c.a)(Object(c.a)(a))),a.toggleWarningWishlist=a.toggleWarningWishlist.bind(Object(c.a)(Object(c.a)(a))),a.toggleSuccessAddWishList=a.toggleSuccessAddWishList.bind(Object(c.a)(Object(c.a)(a))),a.saveToWishList=a.saveToWishList.bind(Object(c.a)(Object(c.a)(a))),a.updateReviews=a.updateReviews.bind(Object(c.a)(Object(c.a)(a))),a.setUpAccording=a.setUpAccording.bind(Object(c.a)(Object(c.a)(a))),a.updateRestaurantInfo=a.updateRestaurantInfo.bind(Object(c.a)(Object(c.a)(a))),a.updateReviews(),a.updateRestaurantInfo(),d.a.get("http://localhost:8080/api/restaurant/"+a.state.restaurantID+"/recipe").then(function(e){a.setState({recipes:e.data}),a.setUpAccording(a.state.recipes.length)},function(e){console.log(e)}),d.a.get("http://localhost:8080/api/wishlist/"+a.state.userID).then(function(e){a.setState({wishlist:e.data})},function(e){console.log(e)}),a}return Object(r.a)(t,e),Object(s.a)(t,[{key:"updateRestaurantInfo",value:function(){var e=this;d.a.get("http://localhost:8080/api/restaurant/"+this.state.restaurantID).then(function(t){e.setState({restaurantInfo:t.data})},function(e){console.log(e)})}},{key:"setUpAccording",value:function(e){var t=[];t.push(!0);for(var a=1;a<e;a++)t.push(!1);this.setState({accordion:t})}},{key:"updateReviews",value:function(){var e=this;d.a.get("http://localhost:8080/api/restaurant/"+this.state.restaurantID+"/review").then(function(t){e.setState({reviews:t.data})},function(e){console.log(e)})}},{key:"toggle",value:function(){void 0===this.state.userID?window.alert("You have not login yet, please login first!"):this.setState({modal:!this.state.modal})}},{key:"toggleSuccess",value:function(){this.setState({success:!this.state.success})}},{key:"toggleWarning",value:function(){this.setState({warning:!this.state.warning})}},{key:"toggleWarningWishlist",value:function(){this.setState({warningWishlist:!this.state.warningWishlist})}},{key:"toggleInfo",value:function(){void 0===this.state.userID?window.alert("You have not login yet, please login first!"):this.setState({info:!this.state.info})}},{key:"toggleSuccessAddWishList",value:function(){this.setState({successAddWishList:!this.state.successAddWishList})}},{key:"toggleAccordion",value:function(e){var t=this.state.accordion.map(function(t,a){return e===a&&!t});this.setState({accordion:t})}},{key:"addReview",value:function(){var e=this;this.toggle();var t=document.getElementById("newReviewTextArea").value,a=document.querySelector("#select option:checked").value;this.state.newReview=t.value,0===t.length?this.toggleWarning():d.a.post("http://localhost:8080/api/restaurant/"+this.state.restaurantID+"/review",{uid:this.state.userID,content:t,star:a}).then(function(t){console.log(t),e.updateReviews(),e.updateRestaurantInfo(),e.toggleSuccess()},function(e){console.log(e)})}},{key:"saveToWishList",value:function(){var e=this,t=document.querySelector("#wishList option:checked").value;console.log("wid:"+t),d.a.post("http://localhost:8080/api/wishlist/"+this.state.userID,{wid:t,rid:this.state.restaurantID}).then(function(t){e.toggleInfo(),e.toggleSuccessAddWishList()},function(t){e.toggleInfo(),e.toggleWarningWishlist(),console.log(t)})}},{key:"render",value:function(){return g.a.createElement("div",{className:"animated fadeIn res-container"},g.a.createElement(u.J,null,g.a.createElement(u.l,{lg:"1"}),g.a.createElement(u.l,{lg:"10"},g.a.createElement("div",{className:"res-title-wrapper"},g.a.createElement("div",null,g.a.createElement("span",{style:{fontSize:"2em",marginRight:".5em"}},g.a.createElement("b",null,this.state.restaurantInfo.name)),g.a.createElement("span",{className:"star bg-danger"},g.a.createElement("i",{className:"fa fa-star"})," ",this.state.restaurantInfo.star),g.a.createElement("h5",null,this.state.restaurantInfo.location),g.a.createElement("h5",null,this.state.restaurantInfo.contact),g.a.createElement("span",{className:"res-tag bg-orange"},this.state.restaurantInfo.cname)),g.a.createElement("div",null,g.a.createElement(u.d,{style:{color:"white"},className:"btn-small btn-round btn-info",onClick:this.toggle},"Add Review"),g.a.createElement(u.d,{style:{marginLeft:"5px",color:"white"},className:"btn-small btn-round btn-warning",onClick:this.toggleInfo},"Save To Wishlist"))),g.a.createElement(u.e,{style:{marginTop:"2em"}},g.a.createElement(u.i,null,g.a.createElement("i",{className:"fa fa-align-justify"}),g.a.createElement("strong",null,"Recipes & Ingredients")),g.a.createElement(u.f,null,g.a.createElement("div",{id:"accordion"},g.a.createElement(u.J,null,this.state.recipes.map(function(e,t){return g.a.createElement(u.l,{lg:"4",key:t},g.a.createElement(u.e,null,g.a.createElement("img",{className:"w-100 recipe-img",src:e.photo_url}),g.a.createElement(u.f,null,g.a.createElement("h4",{className:"d-inline-block m-0 p-0"},g.a.createElement("b",null,e.name)),g.a.createElement("div",{className:"ingredients"},e.ingredients.map(function(e,t){return g.a.createElement("h5",{className:"ingredient bg-orange",key:t},e.name+" ")})),g.a.createElement("h4",{className:"text-info"},"$",e.price))))})))))),g.a.createElement(u.l,{lg:"1"}),g.a.createElement(u.l,{lg:"1"}),g.a.createElement(u.l,{lg:"10"},g.a.createElement(u.e,null,g.a.createElement(u.i,null,g.a.createElement("i",{className:"fa fa-align-justify"}),g.a.createElement("strong",null,"Reviews")),g.a.createElement(u.f,null,g.a.createElement(u.A,null,g.a.createElement(u.J,null,this.state.reviews.map(function(e,t){return g.a.createElement(u.l,{lg:"6",style:{marginTop:"1em"}},g.a.createElement(u.B,{key:t},g.a.createElement("h3",null,g.a.createElement("b",null,'"',e.content,'"')),g.a.createElement("div",{className:"review-wrapper"},g.a.createElement("div",{className:"text-warning"},g.a.createElement("h6",null,g.a.createElement("b",null,"Star")),g.a.createElement("h6",null,e.star)),g.a.createElement("div",{style:{marginLeft:"1em"}},g.a.createElement("h6",null,g.a.createElement("b",null,"Create_time")),g.a.createElement("h6",null,e.create_time)))))})))))),g.a.createElement(u.l,{lg:"1"}),g.a.createElement(u.C,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},g.a.createElement(u.F,{toggle:this.toggle},"New Review"),g.a.createElement(u.D,null,g.a.createElement(u.t,{row:!0},g.a.createElement(u.l,{xs:"12",md:"12"},g.a.createElement(u.z,{htmlFor:"stars"},"How many stars do you want to give?"),g.a.createElement(u.u,{type:"select",className:"400px",name:"multiple-select",id:"select"},this.state.allStars.map(function(e,t){return g.a.createElement("option",{key:t,value:e},e)})),g.a.createElement("br",null),g.a.createElement(u.z,{htmlFor:"newReviewTextArea"},"Please add some details"),g.a.createElement(u.u,{type:"textarea",rows:"9",id:"newReviewTextArea",placeholder:"Content..."})))),g.a.createElement(u.E,null,g.a.createElement(u.d,{color:"primary",onClick:this.addReview},"Submit")," ",g.a.createElement(u.d,{color:"secondary",onClick:this.toggle},"Cancel"))),g.a.createElement(u.C,{isOpen:this.state.success,toggle:this.toggleSuccess,className:"modal-success "+this.props.className},g.a.createElement(u.F,{toggle:this.toggleSuccess},"Review Success"),g.a.createElement(u.D,null,"Thank you for your review."),g.a.createElement(u.E,null,g.a.createElement(u.d,{color:"success",onClick:this.toggleSuccess},"OK")," ")),g.a.createElement(u.C,{isOpen:this.state.successAddWishList,toggle:this.toggleSuccessAddWishList,className:"modal-success "+this.props.className},g.a.createElement(u.F,{toggle:this.toggleSuccessAddWishList},"Save Success"),g.a.createElement(u.D,null,"You can see this restaurant in your wishlist."),g.a.createElement(u.E,null,g.a.createElement(u.d,{color:"success",onClick:this.toggleSuccessAddWishList},"OK")," ")),g.a.createElement(u.C,{isOpen:this.state.warning,toggle:this.toggleWarning,className:"modal-warning "+this.props.className},g.a.createElement(u.F,{toggle:this.toggleWarning},"Review Fail"),g.a.createElement(u.D,null,"Please provide un-empty reviews."),g.a.createElement(u.E,null,g.a.createElement(u.d,{color:"warning",onClick:this.toggleWarning},"OK")," ",g.a.createElement(u.d,{color:"secondary",onClick:this.toggleWarning},"Cancel"))),g.a.createElement(u.C,{isOpen:this.state.warningWishlist,toggle:this.toggleWarningWishlist,className:"modal-warning "+this.props.className},g.a.createElement(u.F,{toggle:this.toggleWarningWishlist},"Duplicate Operation"),g.a.createElement(u.D,null,"The restaurant has already been in your wishlist."),g.a.createElement(u.E,null,g.a.createElement(u.d,{color:"warning",onClick:this.toggleWarningWishlist},"OK")," ",g.a.createElement(u.d,{color:"secondary",onClick:this.toggleWarningWishlist},"Cancel"))),g.a.createElement(u.C,{isOpen:this.state.info,toggle:this.toggleInfo,className:"modal-danger "+this.props.className},g.a.createElement(u.F,{toggle:this.toggleInfo},"WishList Selection"),g.a.createElement(u.D,null,g.a.createElement(u.t,null,g.a.createElement(u.z,{htmlFor:"wishList"},"Which wishlist you want to choose?"),g.a.createElement(u.u,{type:"select",id:"wishList"},this.state.wishlist.map(function(e,t){return g.a.createElement("option",{key:t,value:e.wid},e.name)})))),g.a.createElement(u.E,null,g.a.createElement(u.d,{color:"danger",onClick:this.saveToWishList},"Confirm")," ",g.a.createElement(u.d,{color:"secondary",onClick:this.toggleInfo},"Cancel")))))}}]),t}(o.Component);t.default=h}}]);
//# sourceMappingURL=3.136c695b.chunk.js.map